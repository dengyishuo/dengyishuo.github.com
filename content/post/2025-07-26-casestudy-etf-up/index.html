---
title: 如何根据事件研究来推测市场上涨幅度
author: MatrixSpk
date: '2025-07-26'
slug: casestudy-etf-up
categories:
  - econometrics
tags:
  - etf
  - casestudy
---



<p>先获取稀土ETF（代码为516780）的历史行情数据：</p>
<pre class="r"><code>library(quantmod)
XT &lt;- getSymbols(&quot;516780.ss&quot;, src = &quot;yahoo&quot;, auto.assign = FALSE)
# 获取子集数据
XT &lt;- round(XT[&quot;2025::&quot;],2)</code></pre>
<p>绘制蜡烛图：</p>
<pre class="r"><code>chartSeries(XT, theme = &quot;white&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>下面标记重大事件。包括：</p>
<ul>
<li>2025年3月，份政府工作报告中提及要“整治行业内卷式竞争”。</li>
<li>2025年6月17日，全国人大公布修订后的《反不正当竞争法》。</li>
<li>2025年7月1日，中央财经委员会第七次会议公布要治理企业低价无序竞争。</li>
<li>2025年7月9日，工信部召开企业公平竞争座谈会。</li>
</ul>
<p>在图上标记重大事件：</p>
<pre class="r"><code># 定义事件日期
event_dates &lt;- as.Date(c(&quot;2025-03-07&quot;, 
                         &quot;2025-06-27&quot;,
                         &quot;2025-07-01&quot;,
                         &quot;2025-07-09&quot;)
                       )

# 计算事件日期在子集中的相对索引
event_index &lt;- numeric(length(event_dates))
for (i in seq_along(event_dates)) {
  event_index[i] &lt;- which(index(XT) == event_dates[i])
}

# 添加标记点
addPoints(
  x = event_index,
  y = Ad(XT[event_dates]),
  col = &quot;blue&quot;,
  pch = 24
)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>library(qmao)
addVLine(index(XT[c(&quot;2025-03-05::2025-03-12&quot;,
                    &quot;2025-06-17::2025-06-30&quot;,
                    &quot;2025-07-01::2025-07-25&quot;)
                  ]),
         col = &quot;lightblue&quot;,
         border = &quot;lightblue&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>

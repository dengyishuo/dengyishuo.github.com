---
comments: true
layout: post
title: 获取交易明细数据
categories:
- R
tags:
- 交易明细数据
---

由于大学期间经常不吃早饭的原因，最终我的侥幸心理被无情的现实打破，不幸于上周罹患了反流性食道炎。所以，最近身体十分不适。懒得写东西，也懒得发帖。脆弱的胃，真的伤不起。

n天前，在COS上发布了一个获取股市交易明细的R代码。几经修缮，臻于完整。将来我会将它们放入iquant包中。
两个示例如下：
`
source("get.nowdata.r");  #载入代码
nowdata=get.nowdata("000061");  #获取000061的交易明细数据
#结果如下
$symbol
[1] "000061"

$Company
[1] "农产品"

$Date
[1] "2011年05月16日 15:00"

$Details
Time Volum Price Turnover Orders NIO
1    09:25:02   133 17.57    23.44   平盘   0
2    09:30:02   251 17.60    44.21   流入   2
3    09:30:32    68 17.60    11.97   平盘   0
4    09:30:52     2 17.65     0.35   流入   2
5    09:31:02     8 17.78     1.42   流入   2
6    09:31:12     4 17.65     0.71   流出   1
7    09:31:22    11 17.80     1.96   流入   2
8    09:31:32     6 17.78     1.07   流入   2
9    09:31:42    10 17.66     1.91   平盘   0
10   09:31:47     6 17.73     1.06   流入   2
11   09:32:22    10 17.73     1.77   流入   2
12   09:32:37     3 17.73     0.53   流出   1
13   09:32:47     8 17.73     1.42   流出   1
14   09:32:52     4 17.73     0.71   流出   1
15   09:32:57    74 17.67    13.10   流出   1
16   09:33:12    10 17.73     1.77   流入   2
17   09:33:32     4 17.73     0.71   流入   2
18   09:33:37     6 17.73     1.06   流出   1
19   09:33:52    14 17.75     2.48   流入   2
20   09:34:02    12 17.73     2.12   流入   2
21   09:34:22     2 17.69     0.35   流出   1
22   09:34:27     3 17.69     0.53   流出   1
23   09:34:42     2 17.69     0.35   流出   1
24   09:34:47     1 17.73     0.18   流入   2
25   09:34:57     9 17.69     1.59   流出   1
26   09:35:07     1 17.69     0.18   流出   1
27   09:35:17    82 17.75    14.55   流入   2
28   09:35:22    13 17.75     2.31   流出   1
##例2
source("get.historydata.r"); #载入get.historydata.r
historydata=get.historydata("000061","20110401"); #获取000061在2011年4月1日的交易明细数据
#结果如下：
$symbol
[1] "000061"

$Company
[1] "农产品"

$Date
[1] "2011年4月01日"

$Details
Time Volum Price Turnover Orders NIO
1    09:25:06    84 16.70    14.03   平盘   0
2    09:30:06    72 16.72    12.03   流入   2
3    09:30:11     5 16.74     0.84   流入   2
4    09:30:16    18 16.74     3.01   流入   2
5    09:30:21    18 16.74     3.01   流入   2
6    09:30:31    11 16.72     1.84   流出   1
7    09:30:36    50 16.75     8.37   流入   2
8    09:30:41    11 16.72     1.84   流出   1
`
函数代码文件：
[get.historydata](http://yishuo.org/wp-content/uploads/2011/05/get.historydata.txt)
[get.nowdata](http://yishuo.org/wp-content/uploads/2011/05/get.nowdata.txt)
